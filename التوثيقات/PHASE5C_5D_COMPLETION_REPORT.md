# ØªÙ‚Ø±ÙŠØ± Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5C Ùˆ 5D
## Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (RBAC) + Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… + Ø³Ø¯ Ø§Ù„Ø«ØºØ±Ø§Øª

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 9 ÙØ¨Ø±Ø§ÙŠØ± 2026  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø¬Ø§Ø­ â€” 0 Ø£Ø®Ø·Ø§Ø¡ØŒ 0 ØªØ­Ø°ÙŠØ±Ø§Øª  
**Migration:** `20260209112253_AddSecurityAndSettings`

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ù†Ø¬Ø²](#Ø§Ù„Ø¹Ù…Ù„-Ø§Ù„Ù…Ù†Ø¬Ø²)
3. [Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (42 Ù…Ù„Ù)](#Ø§Ù„Ù…Ù„ÙØ§Øª-Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
4. [Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© (7 Ù…Ù„ÙØ§Øª)](#Ø§Ù„Ù…Ù„ÙØ§Øª-Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©)
5. [Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª](#Ù‚Ø§Ø¹Ø¯Ø©-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
6. [Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø³ÙŠØ³ (Seeds)](#Ø¨ÙŠØ§Ù†Ø§Øª-Ø§Ù„ØªØ£Ø³ÙŠØ³)
7. [Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©](#Ø§Ù„Ø´Ø§Ø´Ø§Øª-Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
8. [Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…](#Ø§Ù„ØªÙƒØ§Ù…Ù„-Ù…Ø¹-Ø§Ù„Ù†Ø¸Ø§Ù…)
9. [Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©](#Ø§Ù„Ø®Ø·ÙˆØ§Øª-Ø§Ù„ØªØ§Ù„ÙŠØ©)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

### Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ø§Ù„Ù…Ø±Ø­Ù„Ø©
ØªÙ†ÙÙŠØ° **Phase 5C (Role-Based Access Control)** Ùˆ **Phase 5D (System Settings Management)** Ù…Ù† Master Plan v1.1ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¯ Ø§Ù„Ø«ØºØ±Ø§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ© ÙÙŠ Phase 5A.

### Ø§Ù„Ø«ØºØ±Ø§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø³Ø¯Ù‡Ø§
1. âŒ **CashTransfer UI Ù…ÙÙ‚ÙˆØ¯** â†’ âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø§Ø´Ø© ÙƒØ§Ù…Ù„Ø©
2. âŒ **FiscalPeriod UI Ù…ÙÙ‚ÙˆØ¯** â†’ âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø§Ø´Ø© ÙƒØ§Ù…Ù„Ø©
3. âŒ **User Management ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯** â†’ âœ… Ù†Ø¸Ø§Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
4. âŒ **System Settings ØªÙØªØ­ FiscalYear Ø¨Ø§Ù„Ø®Ø·Ø£** â†’ âœ… Ø´Ø§Ø´Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø³ØªÙ‚Ù„Ø©
5. âŒ **Login hardcoded (admin/admin)** â†’ âœ… Ù…ØµØ§Ø¯Ù‚Ø© BCrypt Ø­Ù‚ÙŠÙ‚ÙŠØ©

### Ø§Ù„Ù†ØªØ§Ø¦Ø¬
- **42 Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯** ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡
- **7 Ù…Ù„ÙØ§Øª** ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§
- **4 Ø¬Ø¯Ø§ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©** ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- **Build Ù†Ø§Ø¬Ø­**: 0 Ø£Ø®Ø·Ø§Ø¡ØŒ 0 ØªØ­Ø°ÙŠØ±Ø§Øª
- **Migration Ø¬Ø§Ù‡Ø²**: Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

---

## ğŸ—ï¸ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ù†Ø¬Ø²

### 1. Domain Layer (Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)

#### Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
| Ø§Ù„ÙƒÙŠØ§Ù† | Ø§Ù„Ù…Ù„Ù | Ø§Ù„ÙˆØµÙ |
|--------|------|--------|
| **User** | `Domain/Entities/Security/User.cs` | ÙƒÙŠØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŒ Ø­Ø§Ù„Ø© Ø§Ù„Ù‚ÙÙ„ØŒ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØ§Ø´Ù„Ø© |
| **Role** | `Domain/Entities/Security/Role.cs` | Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø£Ù…Ù†ÙŠØ© Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª |
| **RolePermission** | `Domain/Entities/Security/RolePermission.cs` | Ø±Ø¨Ø· Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø¨Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (many-to-many) |
| **SystemSetting** | `Domain/Entities/Settings/SystemSetting.cs` | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… (key-value pairs) |

#### Domain Methods Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ User
```csharp
- UpdateProfile(fullNameAr, fullNameEn, email, phone)
- ChangeRole(roleId)
- ChangePassword(newPasswordHash)
- ResetPassword(newPasswordHash)
- RecordSuccessfulLogin() // ÙŠØ¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØ§Ø´Ù„Ø©
- RecordFailedLogin(maxAttempts=5) // ÙŠÙ‚ÙÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø¹Ø¯ 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª
- Lock() / Unlock()
- Activate() / Deactivate() // ÙŠÙ…Ù†Ø¹ ØªØ¹Ø·ÙŠÙ„ Ø­Ø³Ø§Ø¨ "admin"
```

#### Domain Interfaces Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
```csharp
IUserRepository    // GetByUsernameAsync, UsernameExistsAsync, GetAllWithRolesAsync
IRoleRepository    // GetByIdWithPermissionsAsync, GetAllWithPermissionsAsync
ISystemSettingRepository // GetByKeyAsync, GetByGroupAsync, KeyExistsAsync
```

#### Enums & Exceptions
- **UserStatus**: Active=0, Inactive=1, Locked=2
- **SecurityDomainException**: Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ©

---

### 2. Application Layer (Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚)

#### DTOs Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (26 ØµÙ†Ù)

**User DTOs:**
```csharp
UserDto               // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©
UserListDto           // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
CreateUserDto         // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ (ÙŠØ´Ù…Ù„ Password + ConfirmPassword)
UpdateUserDto         // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
ChangePasswordDto     // ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
ResetPasswordDto      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
```

**Role DTOs:**
```csharp
RoleDto               // Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙˆØ± Ù…Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
RoleListDto           // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ù…Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
```

**Authentication DTOs:**
```csharp
LoginDto              // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
LoginResultDto        // Ù†ØªÙŠØ¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (ØªØ´Ù…Ù„ UserId, FullName, Role, Permissions)
```

**SystemSetting DTOs:**
```csharp
SystemSettingDto         // Ø¹Ø±Ø¶ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…
UpdateSystemSettingDto   // ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ø­Ø¯
SettingGroupDto          // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (GroupName + Settings)
```

#### Mappers Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
```csharp
UserMapper.cs            // ToDto, ToListDto
RoleMapper.cs            // ToDto (with Permissions), ToListDto (with UserCount)
SystemSettingMapper.cs   // ToDto
```

#### Validators Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (FluentValidation)
```csharp
CreateUserDtoValidator        // username, password, fullNameAr, roleId required
UpdateUserDtoValidator        // fullNameAr, roleId required
ChangePasswordDtoValidator    // current + new + confirm passwords
ResetPasswordDtoValidator     // admin reset (new + confirm only)
LoginDtoValidator             // username + password required
UpdateSystemSettingDtoValidator // settingKey + settingValue required
```

#### Services Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

**IAuthenticationService** â†’ `AuthenticationService.cs`
```csharp
LoginAsync(LoginDto)           // BCrypt verification, account locking, role+permissions loading
ChangePasswordAsync(ChangePasswordDto) // ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
```

**IUserService** â†’ `UserService.cs`
```csharp
GetAllAsync()                  // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
GetByIdAsync(id)              // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø­Ø¯
CreateAsync(CreateUserDto)     // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹ BCrypt hashing
UpdateAsync(UpdateUserDto)     // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
ResetPasswordAsync(ResetPasswordDto) // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
ActivateAsync(id) / DeactivateAsync(id) / UnlockAsync(id)
```

**IRoleService** â†’ `RoleService.cs`
```csharp
GetAllAsync()                  // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ù…Ø¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
GetByIdAsync(id)              // Ø¯ÙˆØ± ÙˆØ§Ø­Ø¯
```

**ISystemSettingsService** â†’ `SystemSettingsService.cs`
```csharp
GetAllAsync()                  // Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
GetAllGroupedAsync()           // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø­Ø³Ø¨ GroupName
GetByKeyAsync(key)            // Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ø­Ø¯
UpdateAsync(UpdateSystemSettingDto)        // ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ø­Ø¯
UpdateBatchAsync(List<UpdateSystemSettingDto>) // ØªØ­Ø¯ÙŠØ« Ø¯ÙØ¹Ø©
```

#### ØªØ­Ø¯ÙŠØ« ICurrentUserService
ØªÙ… ØªÙˆØ³ÙŠØ¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„ØªØ´Ù…Ù„:
```csharp
int? UserId { get; }
int? RoleId { get; }
string RoleNameAr { get; }
string FullNameAr { get; }
IReadOnlyList<string> Permissions { get; }
bool HasPermission(string permissionKey);
void SetUser(int userId, string username, string fullNameAr, int roleId, string roleNameAr, List<string> permissions);
```

#### Ù†Ù‚Ù„ IPasswordHasher
- **Ù‚Ø¨Ù„:** ÙÙŠ `Infrastructure/Security/IPasswordHasher.cs`
- **Ø¨Ø¹Ø¯:** ÙÙŠ `Application/Interfaces/IPasswordHasher.cs`
- **Ø§Ù„Ø³Ø¨Ø¨:** Clean Architecture â€” Application ÙŠØ¬Ø¨ Ø£Ù† ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Interface ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø·Ø¨Ù‚Ø©

---

### 3. Infrastructure Layer (Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©)

#### Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª

**PasswordHasher.cs**
- Ø¥Ø²Ø§Ù„Ø© Interface Ø§Ù„Ù…Ø­Ù„ÙŠØ©
- ØªÙ†ÙÙŠØ° `Application.Interfaces.IPasswordHasher`
- BCrypt WorkFactor=12 (Ø¢Ù…Ù† Ù„Ù„Ø¥Ù†ØªØ§Ø¬)

**CurrentUserService.cs**
- Ø¥Ø¶Ø§ÙØ© Ø­Ù‚ÙˆÙ„: `_userId`, `_roleId`, `_roleNameAr`, `_fullNameAr`, `_permissions`
- `HasPermission()`: ÙŠØªØ­Ù‚Ù‚ Ù…Ù† RoleId==1 (Administrator bypass)
- `SetUser()`: Ù†Ø³Ø®Ø© Ù…Ø­Ù…Ù„Ø© Ø¨ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆÙŠØ©
- `ClearUser()`: ÙŠØ¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„

---

### 4. Persistence Layer (Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

#### EF Configurations Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

**UserConfiguration.cs**
```csharp
Table: Users
- Identity PK
- RowVersion (optimistic concurrency)
- Username: nvarchar(50), lowercase, unique index
- PasswordHash: nvarchar(200)
- RoleId: FK to Roles (DeleteBehavior.Restrict)
- IsActive: default true
- IsLocked: default false
- FailedLoginAttempts: default 0
- Indexes: IX_Users_Username (unique), IX_Users_RoleId
```

**RoleConfiguration.cs**
```csharp
Table: Roles
- NameEn: nvarchar(50), unique index
- Permissions: HasMany(RolePermission).WithOne(Role)
  - DeleteBehavior.Cascade (delete permissions with role)
- Users: HasMany(User).WithOne(Role)
  - DeleteBehavior.Restrict (prevent role deletion if has users)
```

**RolePermissionConfiguration.cs**
```csharp
Table: RolePermissions
- Composite unique index: (RoleId, PermissionKey)
- FK to Role (Cascade delete)
```

**SystemSettingConfiguration.cs**
```csharp
Table: SystemSettings
- SettingKey: nvarchar(100), unique index
- DataType: default "string"
```

#### Repositories Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

**UserRepository.cs**
```csharp
GetByUsernameAsync(username)        // with Include(u => u.Role)
UsernameExistsAsync(username)       // Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±
GetAllWithRolesAsync()              // Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
GetByIdWithRoleAsync(id)           // Ù„ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…
```

**RoleRepository.cs**
```csharp
GetByIdWithPermissionsAsync(id)     // with Include(Permissions, Users)
GetAllWithPermissionsAsync()        // Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
GetByNameEnAsync(name)             // Ù„Ù„Ø¨Ø­Ø«
NameExistsAsync(name)              // Ù„Ù„ØªØ­Ù‚Ù‚
```

**SystemSettingRepository.cs**
```csharp
GetByKeyAsync(key)
GetByGroupAsync(groupName)
KeyExistsAsync(key)
```

#### Seed Files (Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø³ÙŠØ³)

**SecuritySeed.cs** - ÙŠÙÙ†ÙØ° Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù†Ø¯ Ø£ÙˆÙ„ ØªØ´ØºÙŠÙ„

**29 ØµÙ„Ø§Ø­ÙŠØ© (Permission Keys):**
```csharp
// Dashboard & Core
Dashboard.View, Accounting.Access, Inventory.Access, Sales.Access, 
Purchases.Access, Treasury.Access, Reports.Access, Settings.Access

// Accounting
Accounting.ManageAccounts, Accounting.ViewJournalEntries, Accounting.PostJournalEntry,
Accounting.ReverseJournalEntry, Accounting.ManageFiscalYears

// Inventory
Inventory.ManageCategories, Inventory.ManageUnits, Inventory.ManageProducts,
Inventory.ManageWarehouses, Inventory.ViewStock

// Sales & Purchases
Sales.CreateInvoice, Sales.PostInvoice, Sales.CreateReturn,
Purchases.CreateInvoice, Purchases.PostInvoice, Purchases.CreateReturn

// Treasury
Treasury.ManageCashboxes, Treasury.CreateReceipts, Treasury.CreatePayments,
Treasury.CreateTransfers

// Reports
Reports.ViewFinancialReports, Reports.ViewInventoryReports, Reports.ViewTaxReports
```

**5 Ø£Ø¯ÙˆØ§Ø± Ù…Ø­Ø¯Ø¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹:**

| Ø§Ù„Ø¯ÙˆØ± | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª | Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… |
|-------|-----------|-----------|
| **Administrator** | ÙƒÙ„ Ø§Ù„Ù€29 ØµÙ„Ø§Ø­ÙŠØ© | Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… |
| **Accountant** | Accounting + Reports + Treasury | Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ |
| **Sales User** | Sales + Dashboard + Reports.ViewFinancialReports + Treasury.CreateReceipts | Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª |
| **Storekeeper** | Inventory + Purchases | Ø£Ù…ÙŠÙ† Ø§Ù„Ù…Ø®Ø²Ù† |
| **Viewer** | Dashboard + Read-only access | Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· |

**Ù…Ø³ØªØ®Ø¯Ù… admin Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ:**
```csharp
Username: "admin"
Password: "admin" (BCrypt hashed)
Role: Administrator
FullNameAr: "Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…"
MustChangePassword: true (ÙŠÙØ·Ù„Ø¨ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø¯Ø®ÙˆÙ„)
```

**SystemSettingSeed.cs** - 25 Ø¥Ø¹Ø¯Ø§Ø¯ ÙÙŠ 5 Ù…Ø¬Ù…ÙˆØ¹Ø§Øª

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© 1: Ø­Ø³Ø§Ø¨Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (8 Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)**
```
DefaultCashAccountId            // Ø­Ø³Ø§Ø¨ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
DefaultBankAccountId            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
DefaultSalesRevenueAccountId    // Ø­Ø³Ø§Ø¨ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
DefaultSalesCostAccountId       // Ø­Ø³Ø§Ø¨ ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
DefaultPurchaseExpenseAccountId // Ø­Ø³Ø§Ø¨ Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª
DefaultInventoryAccountId       // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
DefaultVatPayableAccountId      // Ø­Ø³Ø§Ø¨ Ø¶Ø±ÙŠØ¨Ø© Ù…Ø³ØªØ­Ù‚Ø©
DefaultVatReceivableAccountId   // Ø­Ø³Ø§Ø¨ Ø¶Ø±ÙŠØ¨Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯
```

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© 2: ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ØªØ±Ù‚ÙŠÙ… (2 Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)**
```
InvoiceNumberFormat   // "INV-{Year}-{Seq:D6}" â†’ INV-2026-000001
ReceiptNumberFormat   // "REC-{Year}-{Seq:D6}"
```

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© 3: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© (7 Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)**
```
CompanyNameAr         // "Ø´Ø±ÙƒØ© Ù…Ø§Ø±ÙƒÙˆ Ù„Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª"
CompanyNameEn         // "Marco Software Company"
CompanyAddress        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
CompanyPhone          // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
CompanyEmail          // Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
TaxRegistrationNumber // Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ
CommercialRegistration // Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ
```

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© 4: Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø§Ù„ÙŠØ© (5 Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)**
```
BaseCurrency          // "SAR"
DecimalPlaces         // "2"
DefaultVatRate        // "15"
FiscalYearStartMonth  // "1" (ÙŠÙ†Ø§ÙŠØ±)
EnableAutoPosting     // "false"
```

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© 5: Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… (3 Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)**
```
MaxLoginAttempts      // "5"
SessionTimeoutMinutes // "60"
DefaultPageSize       // "50"
```

#### ØªØ­Ø¯ÙŠØ« MarcoDbContext.cs
```csharp
// Ø¥Ø¶Ø§ÙØ© DbSets Ø¬Ø¯ÙŠØ¯Ø©
public DbSet<User> Users { get; set; }
public DbSet<Role> Roles { get; set; }
public DbSet<RolePermission> RolePermissions { get; set; }
public DbSet<SystemSetting> SystemSettings { get; set; }
```

---

### 5. WPF Layer (Ø·Ø¨Ù‚Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)

#### Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (4 Ø´Ø§Ø´Ø§Øª Ã— 3 Ù…Ù„ÙØ§Øª = 12 Ù…Ù„Ù)

#### 1ï¸âƒ£ **Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª (CashTransfer)**

**Ø§Ù„Ù…Ù„ÙØ§Øª:**
- `ViewModels/Treasury/CashTransferViewModel.cs` (380 Ø³Ø·Ø±)
- `Views/Treasury/CashTransferView.xaml` (200 Ø³Ø·Ø±)
- `Views/Treasury/CashTransferView.xaml.cs`

**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨ÙŠÙ† Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚
- Ø¥Ù†Ø´Ø§Ø¡ ØªØ­ÙˆÙŠÙ„ Ø¬Ø¯ÙŠØ¯
- ØªØ¹Ø¯ÙŠÙ„ ØªØ­ÙˆÙŠÙ„ (Draft ÙÙ‚Ø·)
- ØªØ±Ø­ÙŠÙ„ ØªØ­ÙˆÙŠÙ„ (PostAsync)
- Ø¥Ù„ØºØ§Ø¡ ØªØ­ÙˆÙŠÙ„ (CancelTransferAsync)
- Ø­Ø°Ù ØªØ­ÙˆÙŠÙ„ (Draft ÙÙ‚Ø·)

**Ø§Ù„Ø­Ù‚ÙˆÙ„:**
- Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ (TransferNumber)
- Ø§Ù„ØªØ§Ø±ÙŠØ® (TransactionDate)
- Ù…Ù† ØµÙ†Ø¯ÙˆÙ‚ (SourceCashboxId)
- Ø¥Ù„Ù‰ ØµÙ†Ø¯ÙˆÙ‚ (TargetCashboxId)
- Ø§Ù„Ù…Ø¨Ù„Øº (Amount)
- Ø§Ù„ÙˆØµÙ (Description)
- Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Notes)
- Ø§Ù„Ø­Ø§Ù„Ø© (Status: Draft/Posted/Cancelled)

**Guards:**
```csharp
CanPost = Status == Draft && Amount > 0
CanCancelTransfer = Status == Posted
CanDelete = Status == Draft
```

---

#### 2ï¸âƒ£ **Ø´Ø§Ø´Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (UserManagement)**

**Ø§Ù„Ù…Ù„ÙØ§Øª:**
- `ViewModels/Settings/UserManagementViewModel.cs` (350 Ø³Ø·Ø±)
- `Views/Settings/UserManagementView.xaml` (180 Ø³Ø·Ø±)
- `Views/Settings/UserManagementView.xaml.cs`

**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
- Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ (username + password + role)
- ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (fullName, email, phone, role)
- ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø­Ø³Ø§Ø¨
- ÙØªØ­ Ù‚ÙÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨
- Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (reset to "123456")

**DataGrid Columns:**
- Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Username)
- Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (FullNameAr)
- Ø§Ù„Ø¯ÙˆØ± (RoleNameAr)
- Ù†Ø´Ø· (IsActive âœ“/âœ—)
- Ù…Ù‚ÙÙ„ (IsLocked âœ“/âœ—)
- Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„ (LastLoginAt)

**Form Fields:**
- Username (Ù„Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙÙ‚Ø·)
- Password + ConfirmPassword (Ù„Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙÙ‚Ø·)
- FullNameAr (required)
- FullNameEn
- Email
- Phone
- Role (ComboBox Ù…Ù† Roles)

**Password Reset:**
- ØªØ³Ø£Ù„ ØªØ£ÙƒÙŠØ¯: "Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Â«{user}Â» Ø¥Ù„Ù‰ '123456'ØŸ"
- `MustChangePassword = true` (ÙŠÙØ·Ù„Ø¨ ØªØºÙŠÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„)

---

#### 3ï¸âƒ£ **Ø´Ø§Ø´Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… (SystemSettings)**

**Ø§Ù„Ù…Ù„ÙØ§Øª:**
- `ViewModels/Settings/SystemSettingsViewModel.cs` (120 Ø³Ø·Ø±)
- `Views/Settings/SystemSettingsView.xaml` (100 Ø³Ø·Ø±)
- `Views/Settings/SystemSettingsView.xaml.cs`

**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø¬Ù…Ø¹Ø© Ø­Ø³Ø¨ GroupName
- ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© (ComboBox)
- ØªØ­Ø±ÙŠØ± Ø§Ù„Ù‚ÙŠÙ… (TextBox Ù„ÙƒÙ„ Setting)
- Ø­ÙØ¸ Ø§Ù„ÙƒÙ„ (UpdateBatchAsync)

**Ø§Ù„Ø¹Ø±Ø¶:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ComboBox: Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Description (bold)                  â”‚ â”‚
â”‚ â”‚ SettingKey (gray, small)           â”‚ â”‚
â”‚ â”‚ [TextBox: SettingValue]            â”‚ â”‚
â”‚ â”‚ GroupName (blue tag)               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ ... (more settings)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Grouping:**
- Ø§Ù„Ù…Ù†Ø·Ù‚: `LINQ GroupBy(s => s.GroupName)`
- Ø§Ù„ÙÙ„ØªØ±: "Ø§Ù„ÙƒÙ„" (no filter) + 5 group names

---

#### 4ï¸âƒ£ **Ø´Ø§Ø´Ø© Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© (FiscalPeriod)**

**Ø§Ù„Ù…Ù„ÙØ§Øª:**
- `ViewModels/Accounting/FiscalPeriodViewModel.cs` (200 Ø³Ø·Ø±)
- `Views/Accounting/FiscalPeriodView.xaml` (120 Ø³Ø·Ø±)
- `Views/Accounting/FiscalPeriodView.xaml.cs`

**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
- Ø¹Ø±Ø¶ 12 ÙØªØ±Ø© Ù„ÙƒÙ„ Ø³Ù†Ø© Ù…Ø§Ù„ÙŠØ©
- Ù‚ÙÙ„ ÙØªØ±Ø© (LockPeriodAsync)
- ÙØªØ­ ÙØªØ±Ø© (UnlockPeriodAsync with reason)

**DataGrid Columns:**
- Ø±Ù‚Ù… Ø§Ù„ÙØªØ±Ø© (PeriodNumber: 1-12)
- Ø§Ù„Ø´Ù‡Ø± (Month)
- Ø§Ù„Ø³Ù†Ø© (Year)
- Ù…Ù† ØªØ§Ø±ÙŠØ® (StartDate)
- Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ® (EndDate)
- Ø§Ù„Ø­Ø§Ù„Ø© (StatusName: "Ù…ÙØªÙˆØ­Ø©"ğŸŸ¢ / "Ù…Ù‚ÙÙ„Ø©"ğŸ”´)
- ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙÙ„ (LockedAt)
- Ø£Ù‚ÙÙ„Ù‡Ø§ (LockedBy)

**Business Rules:**
```csharp
CanLockPeriod = Status == Open
CanUnlockPeriod = Status == Locked && UnlockReason.IsNotEmpty
```

**Unlock Reason:**
- Required field: "Ø³Ø¨Ø¨ ÙØªØ­ Ø§Ù„ÙØªØ±Ø© (Ù…Ø·Ù„ÙˆØ¨)"
- ØªØ£ÙƒÙŠØ¯: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ÙØªØ­ Ø§Ù„ÙØªØ±Ø© {n} ({month})ØŸ\nØ§Ù„Ø³Ø¨Ø¨: {reason}"
- ÙŠÙØ³Ø¬Ù„ ÙÙŠ `FiscalPeriod.UnlockReason` Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©

---

#### ØªØ­Ø¯ÙŠØ« LoginWindow.xaml.cs

**Ù‚Ø¨Ù„:**
```csharp
if (username == "admin" && password == "admin")
{
    currentUserService.SetUser("admin");
    // hardcoded
}
```

**Ø¨Ø¹Ø¯:**
```csharp
var authService = _serviceProvider.GetRequiredService<IAuthenticationService>();
var loginDto = new LoginDto { Username = username, Password = password };
var result = await authService.LoginAsync(loginDto);

if (result.IsSuccess)
{
    var loginResult = result.Data;
    currentUserService.SetUser(
        loginResult.UserId,
        loginResult.Username,
        loginResult.FullNameAr,
        loginResult.RoleId,
        loginResult.RoleNameAr,
        loginResult.Permissions
    );
    
    if (loginResult.MustChangePassword)
        MessageBox.Show("ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„.");
    
    // open MainWindow
}
else
{
    MessageBox.Show(result.ErrorMessage); // "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©"
}
```

**Ø§Ù„Ù…Ø²Ø§ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**
- âœ… BCrypt password verification
- âœ… Account locking after 5 failed attempts
- âœ… Failed login counter reset on success
- âœ… LastLoginAt timestamp update
- âœ… Role + Permissions loading
- âœ… MustChangePassword notification

---

#### ØªØ­Ø¯ÙŠØ« MainWindow.xaml

**Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø§Ù„Ù€Sidebar:**

**ØªØ­Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©:**
```xml
<Button Click="NavFiscalPeriods_Click">
    <PackIcon Kind="CalendarMonth" />
    <TextBlock Text="Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©" />
</Button>
```

**ØªØ­Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©:**
```xml
<Button Click="NavCashTransfers_Click">
    <PackIcon Kind="SwapHorizontal" />
    <TextBlock Text="Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª" />
</Button>
```

**Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„):**
```xml
<!-- Ù‚Ø¨Ù„: Ø²Ø± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…" ÙŠÙØªØ­ FiscalYear Ø¨Ø§Ù„Ø®Ø·Ø£ -->
<!-- Ø¨Ø¹Ø¯: 3 Ø£Ø²Ø±Ø§Ø± Ù…Ù†ÙØµÙ„Ø© -->

<Button Click="NavFiscalYear_Click">
    <PackIcon Kind="Calendar" />
    <TextBlock Text="Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©" />
</Button>

<Button Click="NavSystemSettings_Click">
    <PackIcon Kind="Cog" />
    <TextBlock Text="Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…" />
</Button>

<Button Click="NavUserManagement_Click">
    <PackIcon Kind="AccountMultiple" />
    <TextBlock Text="Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†" />
</Button>
```

---

#### ØªØ­Ø¯ÙŠØ« MainWindow.xaml.cs

**Ø§Ù„Ù€Usings Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**
```csharp
using MarcoERP.Application.Interfaces.Security;
using MarcoERP.Application.Interfaces.Settings;
using MarcoERP.WpfUI.ViewModels.Settings;
using MarcoERP.WpfUI.Views.Settings;
```

**Navigation Handlers Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**

```csharp
private void NavCashTransfers_Click(object sender, RoutedEventArgs e)
{
    var transferService = App.Services.GetRequiredService<ICashTransferService>();
    var cashboxService = App.Services.GetRequiredService<ICashboxService>();
    var vm = new CashTransferViewModel(transferService, cashboxService);
    var view = new CashTransferView { DataContext = vm };
    NavigateTo("Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª", view);
}

private void NavFiscalPeriods_Click(object sender, RoutedEventArgs e)
{
    var fiscalYearService = App.Services.GetRequiredService<IFiscalYearService>();
    var vm = new FiscalPeriodViewModel(fiscalYearService);
    var view = new FiscalPeriodView { DataContext = vm };
    NavigateTo("Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©", view);
}

private void NavFiscalYear_Click(object sender, RoutedEventArgs e)
{
    // Ø§Ù„Ø²Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ NavSettings_Click Ø£ØµØ¨Ø­ NavFiscalYear_Click
    var fiscalYearService = App.Services.GetRequiredService<IFiscalYearService>();
    var vm = new FiscalYearViewModel(fiscalYearService);
    var view = new FiscalYearView { DataContext = vm };
    NavigateTo("Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©", view);
}

private void NavSystemSettings_Click(object sender, RoutedEventArgs e)
{
    var settingsService = App.Services.GetRequiredService<ISystemSettingsService>();
    var vm = new SystemSettingsViewModel(settingsService);
    var view = new SystemSettingsView { DataContext = vm };
    NavigateTo("Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…", view);
}

private void NavUserManagement_Click(object sender, RoutedEventArgs e)
{
    var userService = App.Services.GetRequiredService<IUserService>();
    var roleService = App.Services.GetRequiredService<IRoleService>();
    var vm = new UserManagementViewModel(userService, roleService);
    var view = new UserManagementView { DataContext = vm };
    NavigateTo("Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†", view);
}
```

---

#### ØªØ­Ø¯ÙŠØ« App.xaml.cs

**Ø§Ù„Ù€Usings Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**
```csharp
using MarcoERP.Application.Interfaces.Security;
using MarcoERP.Application.Interfaces.Settings;
using MarcoERP.Application.Services.Security;
using MarcoERP.Application.Services.Settings;
using MarcoERP.Application.DTOs.Security;
using MarcoERP.Application.DTOs.Settings;
using MarcoERP.Application.Validators.Security;
using MarcoERP.Application.Validators.Settings;
using MarcoERP.Domain.Interfaces.Security;
using MarcoERP.Domain.Interfaces.Settings;
using MarcoERP.Persistence.Repositories.Security;
using MarcoERP.Persistence.Repositories.Settings;
```

**ØªØ³Ø¬ÙŠÙ„Ø§Øª DI Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**

**Repositories:**
```csharp
services.AddScoped<IUserRepository, UserRepository>();
services.AddScoped<IRoleRepository, RoleRepository>();
services.AddScoped<ISystemSettingRepository, SystemSettingRepository>();
```

**Validators:**
```csharp
services.AddScoped<IValidator<CreateUserDto>, CreateUserDtoValidator>();
services.AddScoped<IValidator<UpdateUserDto>, UpdateUserDtoValidator>();
services.AddScoped<IValidator<ResetPasswordDto>, ResetPasswordDtoValidator>();
services.AddScoped<IValidator<ChangePasswordDto>, ChangePasswordDtoValidator>();
services.AddScoped<IValidator<LoginDto>, LoginDtoValidator>();
services.AddScoped<IValidator<UpdateSystemSettingDto>, UpdateSystemSettingDtoValidator>();
```

**Services:**
```csharp
services.AddScoped<IAuthenticationService, AuthenticationService>();
services.AddScoped<IUserService, UserService>();
services.AddScoped<IRoleService, RoleService>();
services.AddScoped<ISystemSettingsService, SystemSettingsService>();
```

**Seeding ÙÙŠ OnStartup:**
```csharp
using (var scope = _serviceProvider.CreateScope())
{
    var dbContext = scope.ServiceProvider.GetRequiredService<MarcoDbContext>();
    await dbContext.Database.MigrateAsync();
    
    // Existing seeds
    await SystemAccountSeed.SeedAsync(dbContext);
    await UnitSeed.SeedAsync(dbContext);
    
    // NEW: Security seed (roles + permissions + admin user)
    var passwordHasher = scope.ServiceProvider.GetRequiredService<IPasswordHasher>();
    await SecuritySeed.SeedAsync(dbContext, passwordHasher.HashPassword("admin"));
    
    // NEW: System settings seed (25 settings)
    await SystemSettingSeed.SeedAsync(dbContext);
}
```

---

## ğŸ—„ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Migration: `20260209112253_AddSecurityAndSettings`

#### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

**1. Roles**
```sql
CREATE TABLE [Roles] (
    [Id] int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    [NameAr] nvarchar(50) NOT NULL,
    [NameEn] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    [IsSystem] bit NOT NULL DEFAULT 0,
    [RowVersion] rowversion
);

CREATE UNIQUE INDEX [IX_Roles_NameEn] ON [Roles] ([NameEn]);
```

**2. RolePermissions**
```sql
CREATE TABLE [RolePermissions] (
    [Id] int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    [RoleId] int NOT NULL,
    [PermissionKey] nvarchar(100) NOT NULL,
    CONSTRAINT [FK_RolePermissions_Roles_RoleId] 
        FOREIGN KEY ([RoleId]) REFERENCES [Roles]([Id]) ON DELETE CASCADE
);

CREATE UNIQUE INDEX [IX_RolePermissions_RoleId_PermissionKey] 
    ON [RolePermissions] ([RoleId], [PermissionKey]);
```

**3. Users**
```sql
CREATE TABLE [Users] (
    [Id] int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    [Username] nvarchar(50) NOT NULL,
    [PasswordHash] nvarchar(200) NOT NULL,
    [FullNameAr] nvarchar(100) NOT NULL,
    [FullNameEn] nvarchar(100) NULL,
    [Email] nvarchar(200) NULL,
    [Phone] nvarchar(20) NULL,
    [RoleId] int NOT NULL,
    [IsActive] bit NOT NULL DEFAULT 1,
    [IsLocked] bit NOT NULL DEFAULT 0,
    [FailedLoginAttempts] int NOT NULL DEFAULT 0,
    [LastLoginAt] datetime2 NULL,
    [MustChangePassword] bit NOT NULL DEFAULT 1,
    [RowVersion] rowversion,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(100) NOT NULL,
    [ModifiedAt] datetime2 NULL,
    [ModifiedBy] nvarchar(100) NULL,
    CONSTRAINT [FK_Users_Roles_RoleId] 
        FOREIGN KEY ([RoleId]) REFERENCES [Roles]([Id]) ON DELETE NO ACTION -- Restrict
);

CREATE UNIQUE INDEX [IX_Users_Username] ON [Users] ([Username]);
CREATE INDEX [IX_Users_RoleId] ON [Users] ([RoleId]);
```

**4. SystemSettings**
```sql
CREATE TABLE [SystemSettings] (
    [Id] int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    [SettingKey] nvarchar(100) NOT NULL,
    [SettingValue] nvarchar(500) NULL,
    [Description] nvarchar(300) NULL,
    [GroupName] nvarchar(100) NULL,
    [DataType] nvarchar(20) NULL DEFAULT 'string',
    [RowVersion] rowversion
);

CREATE UNIQUE INDEX [IX_SystemSettings_SettingKey] ON [SystemSettings] ([SettingKey]);
```

#### Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
```
Role 1 â”€â”€< * RolePermission (Cascade Delete)
Role 1 â”€â”€< * User (Restrict Delete)
```

#### Ø§Ù„ÙÙ‡Ø§Ø±Ø³
- **IX_Roles_NameEn**: Unique (Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)
- **IX_RolePermissions_RoleId_PermissionKey**: Unique Composite (Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù†ÙØ³ Ø§Ù„Ø¯ÙˆØ±)
- **IX_Users_Username**: Unique (Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
- **IX_Users_RoleId**: Ù„Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„Ù€Joins
- **IX_SystemSettings_SettingKey**: Unique (Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…ÙØ§ØªÙŠØ­)

---

## ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø³ÙŠØ³

### SecuritySeed - ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·

#### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø³Ø§Ø¨Ù‚
```csharp
if (await context.Roles.AnyAsync()) return; // Skip if already seeded
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ 5 Ø£Ø¯ÙˆØ§Ø±
```csharp
Administrator (id=1) // IsSystem=true
Accountant (id=2)    // IsSystem=true
SalesUser (id=3)     // IsSystem=true
Storekeeper (id=4)   // IsSystem=true
Viewer (id=5)        // IsSystem=true
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ¹ÙŠÙŠÙ† 29 ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„Ø£Ø¯ÙˆØ§Ø±
- **Administrator**: ALL 29 permissions
- **Accountant**: 13 permissions (Accounting, Reports, Treasury, Dashboard)
- **SalesUser**: 7 permissions (Sales, Dashboard, Reports.Financial, Treasury.CreateReceipts)
- **Storekeeper**: 6 permissions (Inventory, Purchases, Dashboard)
- **Viewer**: 3 permissions (Dashboard.View, Settings.Access, Reports.Access)

#### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… admin
```csharp
Username: "admin"
PasswordHash: [BCrypt hash of "admin"]
RoleId: 1 (Administrator)
FullNameAr: "Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…"
IsActive: true
MustChangePassword: true
CreatedAt: now
CreatedBy: "SYSTEM"
```

---

### SystemSettingSeed - ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·

#### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø³Ø§Ø¨Ù‚
```csharp
if (await context.SystemSettings.AnyAsync()) return;
```

#### 25 Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ÙˆØ²Ø¹Ø© Ø¹Ù„Ù‰ 5 Ù…Ø¬Ù…ÙˆØ¹Ø§Øª

**Ø­Ø³Ø§Ø¨Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (8):**
- DefaultCashAccountId â†’ ""
- DefaultBankAccountId â†’ ""
- DefaultSalesRevenueAccountId â†’ ""
- DefaultSalesCostAccountId â†’ ""
- DefaultPurchaseExpenseAccountId â†’ ""
- DefaultInventoryAccountId â†’ ""
- DefaultVatPayableAccountId â†’ ""
- DefaultVatReceivableAccountId â†’ ""

**ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ØªØ±Ù‚ÙŠÙ… (2):**
- InvoiceNumberFormat â†’ "INV-{Year}-{Seq:D6}"
- ReceiptNumberFormat â†’ "REC-{Year}-{Seq:D6}"

**Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© (7):**
- CompanyNameAr â†’ "Ø´Ø±ÙƒØ© Ù…Ø§Ø±ÙƒÙˆ Ù„Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª"
- CompanyNameEn â†’ "Marco Software Company"
- CompanyAddress â†’ ""
- CompanyPhone â†’ ""
- CompanyEmail â†’ ""
- TaxRegistrationNumber â†’ ""
- CommercialRegistration â†’ ""

**Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø§Ù„ÙŠØ© (5):**
- BaseCurrency â†’ "SAR"
- DecimalPlaces â†’ "2"
- DefaultVatRate â†’ "15"
- FiscalYearStartMonth â†’ "1"
- EnableAutoPosting â†’ "false"

**Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… (3):**
- MaxLoginAttempts â†’ "5"
- SessionTimeoutMinutes â†’ "60"
- DefaultPageSize â†’ "50"

---

## ğŸ§ª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„ØªØ­Ù‚Ù‚

### Build Status
```
âœ… Build Succeeded
âš ï¸  0 Warnings
âŒ 0 Errors
ğŸ“¦ 9 Projects Compiled
â±ï¸  Time: 34.31 seconds
```

### Migration Status
```
âœ… Migration Generated: 20260209112253_AddSecurityAndSettings
ğŸ“ Location: src/MarcoERP.Persistence/Migrations/
ğŸ—„ï¸  Tables: Roles, RolePermissions, Users, SystemSettings
ğŸ”‘ Indexes: 5 indexes created
ğŸ”— Foreign Keys: 2 FKs (RolePermissionsâ†’Roles, Usersâ†’Roles)
```

### Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©

#### Domain Layer (9 Ù…Ù„ÙØ§Øª)
```
âœ… Domain/Enums/UserStatus.cs
âœ… Domain/Exceptions/SecurityDomainException.cs
âœ… Domain/Entities/Security/User.cs
âœ… Domain/Entities/Security/Role.cs
âœ… Domain/Entities/Security/RolePermission.cs
âœ… Domain/Entities/Settings/SystemSetting.cs
âœ… Domain/Interfaces/Security/IUserRepository.cs
âœ… Domain/Interfaces/Security/IRoleRepository.cs
âœ… Domain/Interfaces/Settings/ISystemSettingRepository.cs
```

#### Application Layer (17 Ù…Ù„Ù)
```
âœ… Application/Interfaces/IPasswordHasher.cs
âœ… Application/DTOs/Security/UserDtos.cs
âœ… Application/DTOs/Security/RoleDtos.cs
âœ… Application/DTOs/Security/AuthDtos.cs
âœ… Application/DTOs/Settings/SystemSettingDtos.cs
âœ… Application/Mappers/Security/UserMapper.cs
âœ… Application/Mappers/Security/RoleMapper.cs
âœ… Application/Mappers/Settings/SystemSettingMapper.cs
âœ… Application/Validators/Security/UserValidators.cs
âœ… Application/Validators/Settings/SystemSettingValidators.cs
âœ… Application/Interfaces/Security/IAuthenticationService.cs
âœ… Application/Interfaces/Security/IUserService.cs
âœ… Application/Interfaces/Security/IRoleService.cs
âœ… Application/Interfaces/Settings/ISystemSettingsService.cs
âœ… Application/Services/Security/AuthenticationService.cs
âœ… Application/Services/Security/UserService.cs
âœ… Application/Services/Security/RoleService.cs
âœ… Application/Services/Settings/SystemSettingsService.cs
```

#### Persistence Layer (8 Ù…Ù„ÙØ§Øª)
```
âœ… Persistence/Configurations/UserConfiguration.cs
âœ… Persistence/Configurations/RoleConfiguration.cs
âœ… Persistence/Configurations/RolePermissionConfiguration.cs
âœ… Persistence/Configurations/SystemSettingConfiguration.cs
âœ… Persistence/Repositories/Security/UserRepository.cs
âœ… Persistence/Repositories/Security/RoleRepository.cs
âœ… Persistence/Repositories/Settings/SystemSettingRepository.cs
âœ… Persistence/Seeds/SecuritySeed.cs
âœ… Persistence/Seeds/SystemSettingSeed.cs
```

#### WPF Layer (8 Ù…Ù„ÙØ§Øª)
```
âœ… WpfUI/ViewModels/Treasury/CashTransferViewModel.cs
âœ… WpfUI/Views/Treasury/CashTransferView.xaml
âœ… WpfUI/Views/Treasury/CashTransferView.xaml.cs
âœ… WpfUI/ViewModels/Settings/UserManagementViewModel.cs
âœ… WpfUI/Views/Settings/UserManagementView.xaml
âœ… WpfUI/Views/Settings/UserManagementView.xaml.cs
âœ… WpfUI/ViewModels/Settings/SystemSettingsViewModel.cs
âœ… WpfUI/Views/Settings/SystemSettingsView.xaml
âœ… WpfUI/Views/Settings/SystemSettingsView.xaml.cs
âœ… WpfUI/ViewModels/Accounting/FiscalPeriodViewModel.cs
âœ… WpfUI/Views/Accounting/FiscalPeriodView.xaml
âœ… WpfUI/Views/Accounting/FiscalPeriodView.xaml.cs
```

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© (7)
```
âœï¸ Application/Interfaces/ICurrentUserService.cs
âœï¸ Infrastructure/Security/PasswordHasher.cs
âœï¸ Infrastructure/Services/CurrentUserService.cs
âœï¸ Persistence/MarcoDbContext.cs
âœï¸ WpfUI/Views/Shell/LoginWindow.xaml.cs
âœï¸ WpfUI/Views/Shell/MainWindow.xaml
âœï¸ WpfUI/Views/Shell/MainWindow.xaml.cs
âœï¸ WpfUI/App.xaml.cs
```

---

## ğŸ¯ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„Ù…Ù†Ø¬Ø²Ø©

### 1. Ù†Ø¸Ø§Ù… RBAC Ø§Ù„ÙƒØ§Ù…Ù„
- âœ… 5 Ø£Ø¯ÙˆØ§Ø± Ù…Ø­Ø¯Ø¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
- âœ… 29 ØµÙ„Ø§Ø­ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ
- âœ… Permission-based access control ÙÙŠ ÙƒÙ„ Ø´Ø§Ø´Ø©
- âœ… Admin bypass (roleId=1 has all permissions)

### 2. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
- âœ… BCrypt password hashing (WorkFactor=12)
- âœ… Account locking Ø¨Ø¹Ø¯ 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙØ§Ø´Ù„Ø©
- âœ… Failed login counter
- âœ… Last login timestamp
- âœ… Forced password change Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø¯Ø®ÙˆÙ„
- âœ… Username uniqueness validation
- âœ… Admin account protection (cannot be deactivated)

### 3. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… CRUD ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
- âœ… ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
- âœ… ÙØªØ­ Ù‚ÙÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
- âœ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
- âœ… Ø¹Ø±Ø¶ Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„ + Ø­Ø§Ù„Ø© Ø§Ù„Ù‚ÙÙ„

### 4. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
- âœ… 25 Ø¥Ø¹Ø¯Ø§Ø¯ ÙÙŠ 5 Ù…Ø¬Ù…ÙˆØ¹Ø§Øª
- âœ… Key-value storage
- âœ… Grouped display
- âœ… Batch update
- âœ… Unique key validation

### 5. Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨ÙŠÙ† Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚
- âœ… Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù ØªØ­ÙˆÙŠÙ„
- âœ… ØªØ±Ø­ÙŠÙ„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Post)
- âœ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Cancel)
- âœ… Ø­Ø§Ù„Ø§Øª: Draft/Posted/Cancelled

### 6. Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
- âœ… Ø¹Ø±Ø¶ 12 ÙØªØ±Ø© Ù„ÙƒÙ„ Ø³Ù†Ø©
- âœ… Ù‚ÙÙ„ Ø§Ù„ÙØªØ±Ø© (Lock)
- âœ… ÙØªØ­ Ø§Ù„ÙØªØ±Ø© Ù…Ø¹ Ø³Ø¨Ø¨ (Unlock with reason)
- âœ… Ø­Ø§Ù„Ø§Øª: Open/Locked

---

## ğŸš€ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©

### 1. ØªØ·Ø¨ÙŠÙ‚ Migration Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```bash
cd "e:\Smart erp"
dotnet ef database update --project src/MarcoERP.Persistence --startup-project src/MarcoERP.WpfUI
```

Ø³ÙŠØªÙ…:
- Ø¥Ù†Ø´Ø§Ø¡ 4 Ø¬Ø¯Ø§ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©
- Ø¥Ù†Ø´Ø§Ø¡ 5 ÙÙ‡Ø§Ø±Ø³
- Ø¥Ù†Ø´Ø§Ø¡ 2 Foreign Keys
- ØªØ´ØºÙŠÙ„ SecuritySeed (5 roles + 29 permissions + admin user)
- ØªØ´ØºÙŠÙ„ SystemSettingSeed (25 settings)

### 2. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…

**ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:**
```
Username: admin
Password: admin
```

**Ø¨Ø¹Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„:**
- Ø³ÙŠØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø©: "ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„"
- ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø§Ù‡Ù„Ù‡Ø§ Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±

**Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ø´Ø§Øª:**
1. Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… â†’ ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
2. Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© â†’ Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© â†’ Lock/Unlock period
3. Ø§Ù„Ø®Ø²ÙŠÙ†Ø© â†’ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª â†’ Create/Post/Cancel transfer
4. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â†’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† â†’ Create user, assign role
5. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â†’ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… â†’ Edit settings, Save All
6. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â†’ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© â†’ Create/Activate/Close year

### 3. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¥Ø¶Ø§ÙÙŠÙŠÙ†

Ù…Ù† Ø´Ø§Ø´Ø© "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†":
1. Ø£Ù†Ø´Ø¦ Ù…Ø³ØªØ®Ø¯Ù… `accountant` Ø¨Ø¯ÙˆØ± Accountant
2. Ø£Ù†Ø´Ø¦ Ù…Ø³ØªØ®Ø¯Ù… `sales1` Ø¨Ø¯ÙˆØ± Sales User
3. Ø£Ù†Ø´Ø¦ Ù…Ø³ØªØ®Ø¯Ù… `storekeeper1` Ø¨Ø¯ÙˆØ± Storekeeper
4. Ø³Ø¬Ù„ Ø®Ø±ÙˆØ¬
5. Ø¬Ø±Ø¨ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### 4. ØªØ®ØµÙŠØµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

Ù…Ù† Ø´Ø§Ø´Ø© "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…":
1. Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©"
2. Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
3. Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© "Ø­Ø³Ø§Ø¨Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©"
4. Ø§Ø±Ø¨Ø· Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ù† Ø´Ø¬Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
5. Ø§Ø­ÙØ¸ Ø§Ù„ÙƒÙ„

### 5. Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© (Ø­Ø³Ø¨ Master Plan v1.1)

#### Phase 2D.5: Performance Optimization
- Database indexing review
- Query optimization
- Caching strategy
- Connection pooling

#### Phase 5E: Background Jobs
- Invoice numbering service
- Scheduled reports
- Data archiving
- Audit log cleanup

#### Phase 5F: Data Integrity Tools
- Chart of accounts validator
- Fiscal year integrity check
- Inventory reconciliation
- Trial balance verification

#### Phase 2E.5: Backup & Recovery
- Automated SQL Server backups
- Backup encryption
- Restore procedures
- Disaster recovery plan

---

## ğŸ“š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

### Permission Keys Reference

| Ø§Ù„Ù…ÙØªØ§Ø­ | Ø§Ù„ÙˆØµÙ |
|---------|--------|
| `Dashboard.View` | Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… |
| `Accounting.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© |
| `Accounting.ManageAccounts` | Ø¥Ø¯Ø§Ø±Ø© Ø´Ø¬Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª |
| `Accounting.ViewJournalEntries` | Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© |
| `Accounting.PostJournalEntry` | ØªØ±Ø­ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙˆØ¯ |
| `Accounting.ReverseJournalEntry` | Ø¹ÙƒØ³ Ø§Ù„Ù‚ÙŠÙˆØ¯ |
| `Accounting.ManageFiscalYears` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| `Inventory.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† |
| `Inventory.ManageCategories` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª |
| `Inventory.ManageUnits` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª |
| `Inventory.ManageProducts` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù |
| `Inventory.ManageWarehouses` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø²Ù† |
| `Inventory.ViewStock` | Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† |
| `Sales.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª |
| `Sales.CreateInvoice` | Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ |
| `Sales.PostInvoice` | ØªØ±Ø­ÙŠÙ„ ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ |
| `Sales.CreateReturn` | Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ØªØ¬Ø¹ |
| `Purchases.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª |
| `Purchases.CreateInvoice` | Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ |
| `Purchases.PostInvoice` | ØªØ±Ø­ÙŠÙ„ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ |
| `Purchases.CreateReturn` | Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ØªØ¬Ø¹ |
| `Treasury.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© |
| `Treasury.ManageCashboxes` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ |
| `Treasury.CreateReceipts` | Ø¥Ù†Ø´Ø§Ø¡ Ø³Ù†Ø¯Ø§Øª Ù‚Ø¨Ø¶ |
| `Treasury.CreatePayments` | Ø¥Ù†Ø´Ø§Ø¡ Ø³Ù†Ø¯Ø§Øª ØµØ±Ù |
| `Treasury.CreateTransfers` | Ø¥Ù†Ø´Ø§Ø¡ ØªØ­ÙˆÙŠÙ„Ø§Øª |
| `Reports.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± |
| `Reports.ViewFinancialReports` | Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| `Reports.ViewInventoryReports` | Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø®Ø²ÙˆÙ† |
| `Reports.ViewTaxReports` | Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ |
| `Settings.Access` | Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª |

### Ø§Ø³ØªØ®Ø¯Ø§Ù… HasPermission ÙÙŠ Ø§Ù„ÙƒÙˆØ¯

```csharp
// ÙÙŠ ViewModel
if (!_currentUserService.HasPermission("Accounting.PostJournalEntry"))
{
    MessageBox.Show("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© ØªØ±Ø­ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙˆØ¯.");
    return;
}

// ÙÙŠ Service
public async Task<ServiceResult> PostInvoiceAsync(int id)
{
    if (!_currentUserService.HasPermission("Sales.PostInvoice"))
        return ServiceResult.Failure("Access Denied: Sales.PostInvoice permission required.");
    
    // ... business logic
}
```

### BCrypt Reference

```csharp
// Hash password
string hash = _passwordHasher.HashPassword("myPassword123");
// Output: $2a$12$N9qo8...

// Verify password
bool isValid = _passwordHasher.VerifyPassword("myPassword123", hash);
// Returns: true

// WorkFactor=12 means 2^12 = 4096 iterations (secure for production)
```

### Change Password Flow

```
User Login â†’ MustChangePassword=true
    â†“
Show notification: "ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
    â†“
User navigates to Settings â†’ Change Password
    â†“
Enter: Current Password, New Password, Confirm New Password
    â†“
IAuthenticationService.ChangePasswordAsync(ChangePasswordDto)
    â†“
1. Verify current password (BCrypt)
2. Validate new password (FluentValidation)
3. Hash new password
4. Update User.PasswordHash
5. Set User.MustChangePassword = false
    â†“
Success: "ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­"
```

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

### 1. Admin Account Protection
ÙƒÙˆØ¯ `User.Deactivate()`:
```csharp
if (Username.Equals("admin", StringComparison.OrdinalIgnoreCase))
    throw new SecurityDomainException("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø·ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ.");
```

### 2. Password Reset Default
Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©ØŒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù‡Ùˆ `"123456"` ÙˆÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªØºÙŠÙŠØ±Ù‡Ø§.

### 3. Account Locking
- ÙŠØªÙ… Ù‚ÙÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø©
- Ø§Ù„Ù…Ø¯ÙŠØ± ÙŠÙ…ÙƒÙ†Ù‡ ÙØªØ­ Ø§Ù„Ù‚ÙÙ„ Ù…Ù† Ø´Ø§Ø´Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø¬Ø­ ÙŠØ¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¥Ù„Ù‰ 0

### 4. Role Deletion
- Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø¯ÙˆØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø±ØªØ¨Ø· Ø¨Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (`DeleteBehavior.Restrict`)
- Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù€5 Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (`IsSystem=true`) Ù…Ø­Ù…ÙŠØ©

### 5. SystemSettings Key Uniqueness
- ÙƒÙ„ `SettingKey` ÙØ±ÙŠØ¯ (unique index)
- Ø§Ø³ØªØ®Ø¯Ù… `GetByKeyAsync("key")` Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹
- `GetAllGroupedAsync()` Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¬Ù…Ø¹

---

## ğŸ‰ Ø§Ù„Ø®Ù„Ø§ØµØ©

ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ ØªÙ†ÙÙŠØ° **Phase 5C (RBAC)** Ùˆ **Phase 5D (System Settings)** Ù…Ø¹ Ø³Ø¯ ÙƒÙ„ Ø§Ù„Ø«ØºØ±Ø§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ© ÙÙŠ Phase 5A.

**Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:**
- âœ… 42 Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯
- âœ… 7 Ù…Ù„ÙØ§Øª Ù…Ø¹Ø¯Ù„Ø©
- âœ… 4 Ø¬Ø¯Ø§ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©
- âœ… 5 Ø£Ø¯ÙˆØ§Ø± + 29 ØµÙ„Ø§Ø­ÙŠØ©
- âœ… 25 Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù…
- âœ… 4 Ø´Ø§Ø´Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
- âœ… 0 Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ù€Build
- âœ… Migration Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ·Ø¨ÙŠÙ‚

**Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¢Ù† ÙŠÙ…Ù„Ùƒ:**
1. Ù†Ø¸Ø§Ù… Ù…ØµØ§Ø¯Ù‚Ø© Ø¢Ù…Ù† Ø¨Ù€BCrypt
2. Ù†Ø¸Ø§Ù… ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù… (RBAC)
3. Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±
4. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù†Ø¸Ø§Ù… Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ
5. Ø´Ø§Ø´Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª ÙˆØ§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©

**Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:** Phase 2D.5 (Performance Optimization) ğŸš€

---

**ØªÙ… Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨ÙˆØ§Ø³Ø·Ø©:** GitHub Copilot  
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 9 ÙØ¨Ø±Ø§ÙŠØ± 2026  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** v0.2.1 (Phase 5C+5D Complete)

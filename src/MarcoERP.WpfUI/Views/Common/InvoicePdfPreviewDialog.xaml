<Window x:Class="MarcoERP.WpfUI.Views.Common.InvoicePdfPreviewDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="{Binding TitleText}"
        Width="1100" Height="720"
        WindowStartupLocation="CenterOwner"
        FlowDirection="RightToLeft"
        Background="{DynamicResource MaterialDesignPaper}">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource CardPanel}" Padding="10" Margin="0,0,0,8">
            <DockPanel>
                <TextBlock Text="{Binding TitleText}" FontSize="16" FontWeight="Bold" DockPanel.Dock="Right" />
                <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                        Command="{Binding OpenPdfCommand}"
                        DockPanel.Dock="Left" Padding="12,4" Margin="6,0,0,0">
                    <TextBlock Text="فتح PDF للطباعة" />
                </Button>
                <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                        Command="{Binding CloseCommand}"
                        DockPanel.Dock="Left" Padding="12,4" Margin="6,0,0,0">
                    <TextBlock Text="إغلاق" />
                </Button>
            </DockPanel>
        </Border>

        <Border Grid.Row="1" Style="{StaticResource CardPanel}" Padding="6">
            <Grid>
                <wv2:WebView2 x:Name="PdfWebView" />
                <Border Background="#80000000" Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <ProgressBar IsIndeterminate="True" Style="{StaticResource MaterialDesignCircularProgressBar}"
                                     Width="48" Height="48" />
                        <TextBlock Text="{Binding StatusText}" Foreground="White" FontSize="14" Margin="0,12,0,0" />
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <TextBlock Grid.Row="2" Text="{Binding StatusText}" Foreground="{StaticResource SubtitleBrush}" Margin="6,8,0,0" />
    </Grid>
</Window>
